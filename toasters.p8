pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
cnt = 0
t_s = 0
t_e = 2
msc = true

t0,t1,t2,t3,t4,t5,t6,t7,t8,t9 =
  {},{},{},{},{},{},{},{},{},{}

toasters = {t0,t1,t2,t3,t4,t5,t6,t7,t8,t9}

function setpos(t)
  t.sp = t_s
  t.x = 32 + flr(rnd(128))
  t.y = flr(rnd(128)) - 32
  if t.x < 128 and t.y > 0 then
    setpos(t)
  end 
  t.d = 1
  t.spd = flr(rnd(4)) + 1
  if flr(rnd(10)) == 0 then
    t.loud = true
  else
    t.loud = false
  end
end

function _init()
  foreach(toasters, setpos)
  music(0)
end

function chkupd(t)
  t.x -= t.spd / 4
  t.y += t.spd / 8
  if cnt % t.spd == 0 then
    t.sp += t.d
    if t.sp >= t_e then
      t.d = -1
    elseif t.sp <= t_s then
      if t.loud then
		   --   sfx(0)
  				end
      t.d = 1
    end
  end
  if t.x < 0 or t.y > 128 then
    setpos(t)
  end
end

function _update()
  cnt += 1
  foreach(toasters,chkupd)
  if (btnp(4) or btnp(5)) then
    if msc then
      music(-1)
      msc = false
    else
      music(0)
      msc = true
    end
  end
end

function showeach(t)
  if t.sp and t.x and t.y then
		  spr(t.sp, t.x, t.y)
		end
end

function _draw()
  cls()
  foreach(toasters, showeach)
  cursor(64,0)
--  print("x:" .. t.x .. " y:" .. t.y)
end
__gfx__
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00776600007766000000660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07760660077606600776066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06606066066060660660606600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06660677066606660666066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666777066667770666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00667760006677770066777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000660000006677700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
01010000000000e6500e6500e6500d6500d6500d6500b6500a6500965009650086500665005650046500265001650016500000000000000000000000000000000000000000000000000000000000000000000000
011800002a320000002a315000002332000000233150000025320000002531500000233200000023315000001d320000001d31500000233200000023315000052532000000253150000023320000002331500000
011800001c320003001c315003002332000300233150030025320003002531500300233200030023315003001b320003001b31500300233200030023315003002532000300253150030023320003002331500300
011800001702000000170150000017020000001701517020000001701500000000001702000000170150000019020000001901500000190200000019015190200000019015000000000019020000001901500000
011800001402000000140150000014020000001401514020000001401500000000001403000000140150000012020000001201500000120200000012015120200000012015000000000012020000001201500000
010f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
01 01034344
02 02044344

